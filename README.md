# test_task


## Технологии
- python = "^3.11"
- sqlalchemy = "^2.0.19"
- fastapi = "^0.92.0"
- loguru = "^0.7.0"
- uvicorn = "^0.20.0"
- pydantic = "^1.10.5"
- python-dotenv = "^1.0.0"
- asyncpg = "0.27.0"
- asyncio = "3.4.3"
- psycopg2-binary = "^2.9.6"
- httpx = "^0.24.1"

#.env файл
В корне проекта необходимо создать .env файл.
Так же есть файл .env.example, в нем указаны все дефолтные значения
Разместите в нем следующие переменные:

- DB_DIALECT=postgresql+asyncpg
- DB_NAME=<Имя базы данных>
- DB_USER=<Имя базы пользователя>
- DB_PASSWORD=<Пароль базы данных>
- DB_HOST=db
- DB_PORT=<Порт базы данных>


## Развернуть проект
Клонировать репозиторий
```sh
git clone <ssh ссылка>
```
В дирректории проекта выполните комманду, для запуска контейнера
```sh
sudo docker compose up --build
```

## Данные
В базе данных будет создана одна таблица `status`
У нее есть следующие поля:
- id: уникальный ключ объекта. Присваивается автоматом. Уникален
- status: статус UP или DOWN
- created_at: дата и время записи объекта в бд

## В терминале доступно логирование.
Логируются следующие события:
- Статус
- Дата создания

## Эндпоинты

По адресу 'http://127.0.0.1:8000/' сенсоры отправляют запрос раз в 1500 запросов, передавая статус.
Данный эндпоинт записывает статус в бд.

По адресу 'http://127.0.0.1:8000/history/', передав время начала и конца отчетов можно получить историю статусов 
за определенный промежуток времени

## Автор Григорян Арсен

